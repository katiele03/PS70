<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PS70: Week 4: Microcontroller</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../style.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to bottom, #7e244c, #a83b5e, #d16b8a);
      color: #fff5f8;
      font-family: Cambria, Georgia, serif;
    }
    h3, h4, p {
      color: #ffe6ef;
    }
    img {
      max-width: 600px;
      width: 100%;
      border-radius: 10px;
      margin: 1rem 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    video {
      border-radius: 10px;
      margin: 1rem 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    a.nav-link:hover {
      color: #ffd1dc !important;
    }
  </style>
</head>

<nav class="navbar navbar-expand-sm navbar-dark" style="color: #EEE7E8;">
  <div class="container-fluid" style="align-items: center; justify-content: center;">
    <div class="flexrow">
      <h2 class="nav-title">PS70 Fall 2024</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">

<h3>Week 4: Microcontroller</h3>

<h4>Ballerina Dancing to Beethoven’s Für Elise</h4>

<p>
For this week’s assignment, I created a different kinetic sculpture of a ballerina dancing to Beethoven's Für Elise. 

I first began by creating the ballerina, designing an outline, importing the outline into Fusion 360, and creating a sketch. I laser cut the dxf file and painted the ballerina.Here is the ballerina design.
</p>
<img src="ballerina.jpg" alt="ballerina sketch">


<p>
Then, I 3D printed a connector between the motor, which will cause the ballerina to rotate, and the dowel, which the ballerina would be attached to. Here is an image of a slice of the connector.
</p>
<img src="connect.jpg" alt="connector">

<p>
Using the same code from last week’s kinetic sculpture assignment, I was able to get the motor to rotate continuously using an ESP32 microcontroller, a motor driver, and a motor. From the ESP32 to the motor driver, I connected the GPIO18 to A1-A, GPIO19 to A1-B, 5V to VCC, and GND to GND. I also connected the motor’s positive and negative wires to the motor driver. Here is the snippet of code I used. 
</p>
<img src="motorcode.jpg" alt="Arduino motor code">

<p>
After I got the motor to rotate, I began working on the speaker. I used an ESP32 microcontroller, a MAX98357A amplifier, and speaker. From the amplifier to the ESP32, I connected the LRC to GPIO25, BCLK to GPIO5, DIN to GPIO26, VCC to 3.3V, GND to GND, and GAIN to GND. I also connected the speaker’s positive and negative wires to the amplifier. Here is an image of the speaker set up.
</p>
<img src="speaker.jpg" alt="speaker set up">

<p>
I could only find Beethoven's Für Elise in the form of an mp3, and I needed it to be a .h file. I converted the sound file from an mp3 to a WAV using Audacity. I changed the project rate to 48,000 Hz, changed the track type to Mono, and cut down the music snippet to 12 seconds. Here is the final WAV file in Audacity.
</p>
<img src="audacity.jpg" alt="audacity">

<p>
I then converted the WAV to a .h file so that it could be played through the ESP32 and MAX98357A amplifier. Here is part of the .h file.
</p>
<img src="H.jpg" alt="H">

<p>
I then tested if the speaker played Beethoven's Für Elise. Here is the code I used, modeled after music test code I found in examples.
</p>
<img src="musiccode.jpg" alt="Arduino music code">

<p>
After I heard the music snippet play, I combined the two snippets of code so that the ballerina would rotate to the music. Here is a video of my ballerina dancing.
</p>

<video width="400" controls>
      <source src="dance.mp4" type="video/mp4">
    </video>

<p>
Here is a circuit schematic 
</p>
<img src="circuit.jpg" alt="circuit schematic">

</div>
</xmp>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
